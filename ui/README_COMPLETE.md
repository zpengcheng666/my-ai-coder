# AI 编程小助手 - 完整前端应用

## 项目简介

这是一个完整的 AI 编程小助手前端应用，集成了后端 AiController 的所有接口功能，提供了现代化的用户界面和完整的功能体验。

## 功能特性

### 🤖 智能聊天
- **流式对话**：支持实时流式AI回复，提供流畅的对话体验
- **Markdown渲染**：自动解析和渲染AI回复中的Markdown格式
- **会话管理**：支持创建、切换和管理多个会话
- **消息历史**：自动保存和加载历史对话记录

### 🗂️ 会话管理
- **会话列表**：左侧边栏显示所有历史会话
- **快速切换**：点击即可切换到不同的会话
- **新建会话**：一键创建新的对话会话
- **会话搜索**：支持按标题搜索历史会话

### 📚 知识库管理
- **文档添加**：支持添加新文档到RAG知识库
- **文档重载**：一键重新加载所有知识库文档
- **操作日志**：实时显示文档操作的成功/失败状态
- **路径管理**：支持多种文档格式和路径

### ⚙️ 系统设置
- **用户配置**：自定义用户ID和显示名称
- **聊天设置**：流式输出、自动滚动、时间戳显示等
- **连接设置**：后端服务地址和超时配置
- **数据管理**：导出/导入设置、重置配置

### 🔗 连接监控
- **实时状态**：头部显示与后端的连接状态
- **自动检测**：定期检查后端服务可用性
- **错误提示**：连接异常时显示友好提示

## 技术栈

- **Vue 3** - 现代化的响应式前端框架（Composition API）
- **TypeScript** - 类型安全的 JavaScript 超集
- **Vite** - 快速的构建工具
- **Axios** - HTTP客户端库
- **Marked** - Markdown解析器
- **EventSource** - 服务端发送事件 (SSE)

## 项目结构

```
ui/ai-code-helper-frontend/
├── src/
│   ├── api/
│   │   ├── modules/
│   │   │   ├── chat.ts           # 聊天相关接口
│   │   │   ├── conversation.ts   # 会话管理接口
│   │   │   ├── document.ts       # 文档管理接口
│   │   │   └── health.ts         # 健康检查接口
│   │   └── index.ts              # API 统一导出
│   ├── components/
│   │   ├── ChatInput.vue         # 聊天输入组件
│   │   ├── ChatMessage.vue       # 消息显示组件
│   │   ├── ConversationList.vue  # 会话列表组件
│   │   ├── DocumentManager.vue   # 文档管理组件
│   │   ├── LoadingDots.vue       # 加载动画组件
│   │   └── SettingsPanel.vue     # 设置面板组件
│   ├── composables/
│   │   ├── useChat.ts            # 聊天状态管理
│   │   ├── useSidebar.ts         # 侧边栏状态管理
│   │   └── useDialog.ts          # 对话框状态管理
│   ├── types/
│   │   └── index.ts              # TypeScript 类型定义
│   ├── utils/
│   │   └── index.ts              # 工具函数
│   ├── App.vue                   # 主应用组件
│   └── main.ts                   # 应用入口
├── package.json                  # 项目依赖
├── vite.config.ts                # Vite配置
├── tsconfig.json                 # TypeScript配置
└── index.html                    # HTML模板
```

## API接口集成

### 已集成的后端接口

1. **GET /ai/health** - 健康检查
2. **GET /ai/chat** - 流式聊天接口 (SSE)
3. **POST /ai/chat** - 普通聊天接口
4. **POST /ai/conversation** - 创建新会话
5. **GET /ai/conversations** - 获取会话列表
6. **POST /ai/rag/document** - 添加文档到知识库
7. **POST /ai/rag/reload** - 重新加载知识库文档

### 接口参数适配

- 自动适配 `memoryId` 和 `conversationId` 参数
- 提供默认 `userId` 值
- 支持灵活的参数配置

## 安装和启动

### 1. 安装依赖
```bash
cd ui/ai-code-helper-frontend
npm install
```

### 2. 启动开发服务器
```bash
npm run dev
```

### 3. 构建生产版本
```bash
npm run build
```

### 4. 预览生产版本
```bash
npm run preview
```

### 5. 类型检查
```bash
npm run type-check
```

## 配置说明

### 后端服务配置
默认后端地址：`http://localhost:8081/api`

可以在设置面板中修改：
- 服务地址
- 请求超时时间
- 连接检查间隔

### 用户设置
- **用户ID**：标识用户身份，影响会话记录
- **用户名称**：界面显示名称
- **流式模式**：是否启用实时回复
- **自动滚动**：新消息时是否自动滚动
- **显示时间**：是否显示消息时间戳

## 功能详解

### 会话管理
1. **创建会话**：点击"新建会话"按钮
2. **切换会话**：点击左侧会话列表中的任意会话
3. **搜索会话**：在搜索框中输入关键词
4. **折叠侧边栏**：点击左上角的菜单按钮

### 文档管理
1. **添加文档**：点击"📚"按钮 → 添加文档 → 输入文件路径
2. **重新加载**：点击"🔄"按钮重新加载所有文档
3. **查看日志**：在操作日志区域查看处理结果

### 系统设置
1. **打开设置**：点击右上角"⚙️"按钮
2. **修改配置**：调整各项设置参数
3. **导出设置**：备份当前配置到JSON文件
4. **导入设置**：从JSON文件恢复配置
5. **重置设置**：恢复默认配置

## 响应式设计

- **桌面端**：完整的三栏布局（侧边栏 + 聊天 + 工具栏）
- **平板端**：可折叠侧边栏，优化按钮大小
- **手机端**：全屏侧边栏，简化界面元素

## 数据持久化

- **设置数据**：保存在浏览器 localStorage
- **会话状态**：自动恢复上次的设置
- **连接状态**：实时监控并持续更新

## 错误处理

- **网络错误**：显示友好的错误提示
- **连接超时**：自动重试和状态恢复
- **API异常**：详细的错误信息展示
- **用户操作**：防重复提交和验证

## 性能优化

- **懒加载**：组件按需加载
- **虚拟滚动**：大量消息时的性能优化
- **缓存策略**：合理的数据缓存
- **防抖处理**：输入和搜索的防抖

## 浏览器兼容性

- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 开发说明

### 项目架构
本项目采用模块化架构设计：
1. **Components**：Vue 组件，负责 UI 展示
2. **Composables**：可复用的 Composition Functions，负责业务逻辑
3. **API**：按功能模块划分的 API 接口
4. **Types**：TypeScript 类型定义
5. **Utils**：通用工具函数

### 添加新功能
1. 在 `src/api/modules/` 中添加新的API接口
2. 创建对应的Vue组件
3. 在 `src/composables/` 中添加相关业务逻辑
4. 在 `src/types/` 中添加相关类型定义
5. 在 `App.vue` 中集成新组件

### 自定义样式
- 所有组件使用 scoped CSS
- 支持CSS变量自定义主题
- 响应式设计遵循移动优先原则

### 调试技巧
- 使用Vue DevTools调试组件状态
- 在浏览器控制台查看API请求
- 检查localStorage中的持久化数据

## 部署建议

### 开发环境
```bash
npm run dev
```

### 生产环境
```bash
npm run build
# 将 dist 目录部署到web服务器
```

### Docker部署
```dockerfile
FROM nginx:alpine
COPY dist/ /usr/share/nginx/html/
EXPOSE 80
```

## 故障排除

### 常见问题

1. **后端连接失败**
   - 检查后端服务是否启动
   - 确认服务地址和端口配置
   - 查看CORS设置

2. **会话加载失败**
   - 检查用户ID配置
   - 确认数据库连接正常
   - 查看后端日志

3. **文档管理错误**
   - 确认文件路径正确
   - 检查文件权限
   - 查看RAG服务状态

4. **界面显示异常**
   - 清除浏览器缓存
   - 检查控制台错误信息
   - 重置用户设置

## 更新日志

### v1.0.0 (2024-01-XX)
- ✅ 完整的聊天功能
- ✅ 会话管理系统
- ✅ 文档管理界面
- ✅ 系统设置面板
- ✅ 连接状态监控
- ✅ 响应式设计
- ✅ 所有后端API集成

### v1.1.0 (2024-01-XX)
- ✅ 迁移到 Vue 3 Composition API
- ✅ 引入 TypeScript 类型安全
- ✅ 重构项目结构，模块化API
- ✅ 创建可复用的 Composable 函数
- ✅ 优化组件间通信和状态管理

## 许可证

MIT License

## 贡献指南

欢迎提交 Issue 和 Pull Request 来改进项目！

---

**联系方式**: 如有问题请查看项目文档或提交Issue